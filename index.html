
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Solicita tu cr√©dito | R√°pido y sin complicaciones</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f9f9f9; }
    header { background: #003366; color: white; padding: 40px 20px; text-align: center; }
    header h1 { margin-bottom: 10px; font-size: 36px; }
    header p { font-size: 18px; }
    section { padding: 40px 20px; max-width: 800px; margin: auto; background: white; margin-top: 20px; border-radius: 8px; }
    h2 { color: #003366; }
    ul { list-style: none; padding: 0; }
    ul li::before { content: "‚úîÔ∏è "; }
    form { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
    input, select { padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #0077cc; color: white; padding: 15px; border: none; border-radius: 4px; font-size: 18px; cursor: pointer; }
    button:hover { background: #005fa3; }
    .footer { text-align: center; font-size: 14px; margin-top: 20px; color: #555; }
  </style>
</head>
<body>

<header>
  <h1>Solicita tu cr√©dito en minutos</h1>
  <p>R√°pido, seguro y 100% en l√≠nea. Sin papeleos, sin complicaciones.</p>
  <a href="#formulario"><button>Solicitar ahora</button></a>
</header>

<section>
  <h2>¬øPor qu√© elegirnos?</h2>
  <ul>
    <li>Tasas competitivas desde el 1.2% mensual</li>
    <li>Aprobaci√≥n en menos de 24 horas</li>
    <li>Cr√©ditos desde $1.000.000 hasta $50.000.000</li>
    <li>Sin necesidad de codeudor</li>
    <li>Proceso 100% digital</li>
  </ul>
</section>

<section>
  <h2>¬øC√≥mo funciona?</h2>
  <ol>
    <li>Llena el formulario de solicitud</li>
    <li>Recibe tu preaprobaci√≥n v√≠a correo o WhatsApp</li>
    <li>Firma digital y recibe el dinero en tu cuenta</li>
  </ol>
</section>

<section>
  <h2 id="formulario">Formulario de solicitud</h2>
  <form>
    <input type="text" name="nombre" placeholder="Nombre completo" required>
    <input type="text" name="documento" placeholder="N√∫mero de documento" required>
    <input type="email" name="email" placeholder="Correo electr√≥nico" required>
    <input type="tel" name="telefono" placeholder="N√∫mero de celular" required>
    <input type="number" id="monto" placeholder="Monto deseado (COP)" required>
    <input type="number" id="ingreso" placeholder="Ingreso mensual (COP)" required>
    <input type="number" id="plazo" placeholder="Plazo en meses" required>
    <input type="number" id="tasa" placeholder="Tasa mensual (ej. 0.02)" required>
    <label><input type="checkbox" required> Acepto el tratamiento de datos seg√∫n la <a href="#">pol√≠tica de privacidad</a></label>
    <button type="button" onclick="calcularCuota()">Calcular cuota</button>
  </form>
  <p id="resultado"></p>
  <button id="btn-whatsapp" style="display:none; background-color: #25D366;">Continuar por WhatsApp</button>
</section>

<div class="footer">
  ¬© 2025 Cr√©ditos Seguros S.A.S. | Todos los derechos reservados
</div>

<script>
  async function calcularCuota() {
    const monto = parseFloat(document.getElementById("monto").value);
    const ingreso = parseFloat(document.getElementById("ingreso").value);
    const plazo = parseInt(document.getElementById("plazo").value);
    const tasa = parseFloat(document.getElementById("tasa").value);

    const nombre = document.querySelector('input[name="nombre"]').value;
    const documento = document.querySelector('input[name="documento"]').value;
    const telefono = document.querySelector('input[name="telefono"]').value;

    const resultado = document.getElementById("resultado");
    const btnWhatsapp = document.getElementById("btn-whatsapp");
    resultado.innerText = "Calculando...";
    btnWhatsapp.style.display = "none";

    try {
      const respuesta = await fetch("https://calculadora-credito.onrender.com/calcular-cuota", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ monto, ingreso, plazo, tasa }),
      });

      const data = await respuesta.json();

      if (!respuesta.ok) {
        resultado.innerText = "‚ùå Error: " + data.error;
        return;
      }

      resultado.innerHTML = `
        üí∞ Cuota mensual estimada: <strong>$${data.cuota_mensual.toLocaleString()}</strong><br>
        üìä Porcentaje del ingreso: ${data.porcentaje_ingreso}%<br>
        ‚úÖ ¬øAprobado?: <strong>${data.aprobado ? "S√≠" : "No"}</strong>
      `;

      if (data.aprobado) {
        const mensaje = encodeURIComponent(
          `Hola, mi nombre es ${nombre}.\nMi n√∫mero de documento es ${documento}.\nYa hice el c√°lculo del cr√©dito:\nMonto: $${monto.toLocaleString()}\nCuota mensual: $${data.cuota_mensual.toLocaleString()}\n¬øPodemos continuar el proceso?`
        );

        const numero = "573102101667"; // ‚Üê Cambia esto por tu n√∫mero de WhatsApp real

        btnWhatsapp.onclick = () => {
          window.open(`https://wa.me/${numero}?text=${mensaje}`, "_blank");
        };
        btnWhatsapp.style.display = "inline-block";
      }

    } catch (err) {
      resultado.innerText = "‚ùå Ocurri√≥ un error al conectar con el servidor.";
    }
  }
</script>


</body>
</html>
